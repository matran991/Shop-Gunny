/* Script show data gunny in view_topic for Forumorion by markai30 - matran999 (viethoagame.forumvi.com) */
function draw_img(){for(var t=9,a=0,e=0;t>e;e++)object_num[e]=new Image,object_num[e].src=object_img[e],object_num[e].onload=function(){a++,a==t&&(allLoaded(),number_post+=1,max_post>number_post&&set_post(number_post))}}function allLoaded(){var t=obj_class[class_set],a=t.context;a.drawImage(object_num[0],170,0),a.drawImage(object_num[1],182,27),a.drawImage(object_num[2],170,0),a.drawImage(object_num[3],170,0),a.drawImage(object_num[4],170,0),a.drawImage(object_num[5],170,0),a.drawImage(object_num[6],170,0),a.drawImage(object_num[7],5,40),a.drawImage(object_num[8],45,30)}function draw_text(t,a,e,n,s){var c=obj_class[class_set],o=c.context;o.font="bold "+n+"px Sans-serif",o.strokeStyle=s,o.lineWidth=2,o.lineJoin="miter",o.miterLimit=1,o.strokeText(t,a,e),o.fillStyle="white",o.fillText(t,a,e)}function clearCanvas(){var t=obj_class[class_set],a=t.context;a.clearRect(0,0,canvas.width,canvas.height);var e=canvas.width;canvas.width=1,canvas.width=e}function add_avata(t,a){if("Vong"==t||"Canh"==t){var e="_wing="+object_item.Canh+"&circle="+object_item.Vong,n='<embed src="https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/profile.swf" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" play="true" loop="true" scale="showall" wmode="transparent" name="gnAvatar" menu="true" allowfullscreen="false" allowscriptaccess="always" salign="" flashvars="'+e+'" type="application/x-shockwave-flash" height="200px" width="300px" align="middle">';$(".wrap_gunny."+class_set+" .canh_gunny").html(n)}else"Nen"==t&&$(".wrap_gunny."+class_set+" .block_gunny").attr("style","background: url(https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/Nen/"+a+".png) center center;")}function canvas_run(){var t=obj_class[class_set],a=t.context;if(0==item_bo)object_img={0:"https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/Vk/"+object_item.Vk+".png",1:"https://cdn.rawgit.com/matran991/Shop-Gunny/master/"+object_item.Gt+"/Mat/"+object_item.Mat+".png",2:"https://cdn.rawgit.com/matran991/Shop-Gunny/master/"+object_item.Gt+"/Toc/"+object_item.Toc+".png",3:"https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/Non/"+object_item.Non+".png",4:"https://cdn.rawgit.com/matran991/Shop-Gunny/master/"+object_item.Gt+"/Ao/"+object_item.Ao+".png",5:"https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/Ts/"+object_item.Ts+".png",6:"https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/Kinh/"+object_item.Kinh+".png",7:"https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/Lv/lv.png",8:"https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/Lv/"+level+".png"},draw_img(),object_item.Pet>0&&$(".wrap_gunny."+class_set+" .block_gunny").append('<div class="pet_animation" style="background-image: url(https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/Pet/'+object_item.Pet+'.png)"></div>');else{$(".wrap_gunny."+class_set+" .block_gunny").append('<div class="bo_animation" style="background-image: url(https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/Bo/'+object_item.Bo+'.png)"></div>');var e=new Image;e.src="https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/Lv/lv.png",e.onload=function(){a.drawImage(e,5,40)};var n=new Image;n.src="https://cdn.rawgit.com/matran991/Shop-Gunny/master/Nam/Lv/"+level+".png",n.onload=function(){a.drawImage(n,45,30)}}draw_text("ATK :",5,85,14,"darkcyan"),draw_text(object_item.atk,45,85,16,"red"),draw_text("DEF :",5,105,14,"darkmagenta"),draw_text(object_item.def,45,105,16,"red"),draw_text("HP :",5,125,14,"darkred"),draw_text(object_item.hp,45,125,16,"red"),draw_text("MP :",5,145,14,"darkturquoise"),draw_text(object_item.mp,45,145,16,"red")}function exp_bar(){var t=obj_class[class_set],a=t.context;a.fillStyle="black",a.fillRect(10,10,100,15),a.fillStyle="darkorange",a.fillRect(10,10,exp,15),draw_text("EXP: "+exp+" %",35,22,12,"red")}function begin_set(){canvas_run(),exp_bar(),add_avata("Nen",object_item.Nen),add_avata("Vong",object_item.Vong),add_avata("Canh",object_item.Canh)}function set_post(t){var a=$('[class*="post--"]:eq('+t+")"),e=a.find('.field_user .label:contains("Gunny")').parent(),n=e.find(".field_content").text();e.remove();var s=Number(a.find('.field_user .label:contains("'+text_post+'")').parent().find(".field_content").text()),c=Number(a.find('.field_user .label:contains("'+text_thank+'")').parent().find(".field_content").text());class_set=a.attr("class"),class_set=class_set.match(/.+post--(\d+)/)[1],class_set="p"+class_set,obj_class[class_set]=new Object;var o='<div class="wrap_gunny '+class_set+'"><div class="inner_gunny"><div class="body_gunny"><div class="block_gunny"><canvas class="canvas_gunny"></canvas><div class="canh_gunny"></div></div></div></div></div>';if("string"==typeof n&&1==/Ao|Bo|Vong|Canh|Pet/.test(n)){object_item=JSON.parse(n),item_bo=!1,a.find(""+wrap_class[version]).append(o);var r=obj_class[class_set];canvas=a.find(".canvas_gunny")[0],r.context=canvas.getContext("2d"),max_level=99,level=Math.ceil((s+c)/max_level),level>max_level&&(level=max_level),exp=Math.round(100/max_level*(s%max_level)),begin_set()}}var check=$("html").html(),max_page=24,link_img="https://cdn.rawgit.com/matran991/Shop-Gunny/master/",start=0,max_item=79,currentFrame=1,anime_auto=!0,pet_auto="",anime_auto="",obj_class=new Object,object_default={Ao:0,Bo:0,Canh:0,Hu:0,Kinh:0,Mat:0,Non:0,Toc:0,Ts:0,Vk:0,Vong:0,Pet:0,Nen:0,Gt:"Nam",atk:0,def:0,hp:0,mp:0},object_num={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0};if(close_check=!1,1==/ipbwrapper/.test(check))var version="invision";else if(1==/pun-head/.test(check))var version="punbb";else if(1==/phpbb/.test(check))var version="phpbb";var wrap_class={invision:".post-entry",punbb:".entry-content",phpbb:".content.clearfix"},max_post=$(".post").length,number_post=0;set_post(number_post);
